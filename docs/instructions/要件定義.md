### 概要
- 機能要件：何を「必ず」実装するべきか
- 非機能要件：イリティの決定

### ユースケース
#### アクター
- ログインユーザー（ユーザー）
- システム管理者（Admin）

#### ユースケース記述

| ID    | ユースケース名                |     |
| ----- | ---------------------- | --- |
| UC-01 | ユーザーがログインする            |     |
| UC-02 | ユーザーがボードを作成する          |     |
| UC-03 | ユーザーがボードを選択・開く         |     |
| UC-04 | ユーザーがオブジェクトを描画・移動・削除する |     |
| UC-05 | 他ユーザーとリアルタイムで編集する      |     |
| UC-06 | 他ユーザーのマウスカーソルを見る       |     |
| UC-07 | ユーザーが範囲選択する            |     |
| UC-08 | ユーザーがボードのタイトルを修正する     |     |
| UC-09 | ユーザーが会員登録を行う           |     |
| UC-10 | ユーザーがパスワードを変更する        |     |
※1：図形・テキスト・画像＝オブジェクト

##### UC-01

- ユーザーがログインする
- 前提条件：ユーザーがログイン済み
- 基本フロー
	1.ユーザーはログイン画面にアクセスする
	2.メールアドレスとパスワードを入力する
	3.「ログイン」ボタンをクリックする
	4.システムは認証を行い、成功した場合はダッシュボードに遷移する
- 代替フロー
	- メールアドレスが存在しない場合は「アカウントが存在しません」と表示する
	- パスワードが間違っている場合は「パスワードに誤りがあります」と表示する
	- それ以外の何らかの理由で失敗した場合は「ログインに失敗しました」と表示する

##### UC-02
- ユーザーがボードを作成する
- 前提条件：ユーザー
- 基本フロー
	  1. ユーザーは「新しいボードを作成」ボタンをクリックする
	  2. システムはボード名入力モーダルを表示する
	  3. ユーザーがボード名を入力して「作成」ボタンをクリックする
	  4. システムはボードを作成し、編集画面に遷移する
- 代替フロー
	- 入力が空の場合、「ボード名を入力してください」と表示する
	- 入力が100文字以上の場合、「ボード名が長すぎます！」と表示する

##### UC-03
- ユーザーがボードを選択・開く
- 前提条件：作成済みのボードが存在する
- 基本フロー
	  1. ユーザーはダッシュボード上のボード一覧からボードを選択する
	  2. システムは該当ボードを読み込み、編集画面を表示する
- 代替フロー
	- ボードが読み込めない場合は「ボードが読み込めません」と表示する

##### UC-04
- ユーザーがオブジェクトを描画・移動・削除する
- 前提条件：ボードを開いている
- 基本フロー
	  1. ユーザーはツールバーから「図形（例：四角形）」を選択する
	  2. キャンバス上にクリックして図形を描画する
	  3. 図形をドラッグして移動する
	  4. 図形を選択し、Deleteキーまたはコンテキストメニューから削除する

##### UC-05
- 他ユーザーとリアルタイムで編集する
- 前提条件：同じボードを同時に開いている
- 基本フロー
	  1. ユーザー A と B が同一ボードを開く
	  2. ユーザー A がオブジェクトを描画または移動する
	  3. ユーザー B の画面上に、ユーザー A の操作がリアルタイムに反映される
- 代替フロー
	- 通信が一時的に切断された場合、一時的に同期が止まり、再接続時に最新状態が同期される

##### UC-06
- 他ユーザーのマウスカーソルを見る
- 前提条件：同じボードを同時に開いている
- 基本フロー
	  1. 各ユーザーのマウス位置が定期的に送信される
	  2. 他ユーザーの画面上に、ユーザー名ラベル付きのカーソルがリアルタイムに描画される
- 代替フロー
	- カーソル情報の送信が停止された場合、そのユーザーのカーソルは一定時間後に非表示になる

##### UC-07
- ユーザーが範囲選択する
- 前提条件：ユーザーが編集可能なボードを開いている
- 基本フロー
	  1. ユーザーは「新しいボードを作成」ボタンをクリックする
	  2. システムはボード名入力モーダルを表示する
	  3. ユーザーがボード名を入力して「作成」ボタンをクリックする
	  4. システムはボードを作成し、編集画面に遷移する
- 代替フロー
	- 入力が空の場合、「ボード名を入力してください」と表示する
	- 入力が100文字以上の場合、「ボード名が長すぎます！」と表示する

##### UC-08
- ユーザーが範囲選択する
- 前提条件：ユーザーが編集可能なボードを開いている
- 基本フロー
	  1. ユーザーは「新しいボードを作成」ボタンをクリックする
	  2. システムはボード名入力モーダルを表示する
	  3. ユーザーがボード名を入力して「作成」ボタンをクリックする
	  4. システムはボードを作成し、編集画面に遷移する
- 代替フロー
	- 入力が空の場合、「ボード名を入力してください」と表示する
	- 入力が100文字以上の場合、「ボード名が長すぎます！」と表示する

##### UC-09
- ユーザーが会員登録を行う
- 前提条件：ユーザーが未登録であり、登録画面にアクセスしている
- 基本フロー
	  1. ユーザーが「新規登録」ページにアクセスする
	  2. 名前、メールアドレス、パスワードを入力する
	  3. 「登録」ボタンをクリックする
	  4. システムが入力内容を検証し、ユーザーアカウントを作成する
	  5. 成功後、ダッシュボードまたはボード一覧ページにリダイレクトされる
- 代替フロー
	- 入力内容が無効（例: メール形式ミス、パスワードが短い）な場合、エラーメッセージを表示し再入力を促す

##### UC-10
- ユーザーがパスワードを変更する
- 前提条件：アカウント設定ページにアクセスしている
- 基本フロー
	  1. ユーザーが「新規登録」ページにアクセスする
	  2. 名前、メールアドレス、パスワードを入力する
	  3. 「登録」ボタンをクリックする
	  4. システムが入力内容を検証し、ユーザーアカウントを作成する
	  5. 成功後、ダッシュボードまたはボード一覧ページにリダイレクトされる
- 代替フロー
	- 入力内容が無効（例: メール形式ミス、パスワードが短い）な場合、エラーメッセージを表示し再入力を促す
### 非機能要件
| カテゴリ               | 要件内容          | 対応・仕様                              | 備考                           |
| ------------------ | ------------- | ---------------------------------- | ---------------------------- |
| **認証・認可**          | パスワードの安全な保存   | SHA256ハッシュ + ソルト + ストレッチング         | bcryptまたはPBKDF2の使用も検討可       |
| 〃                  | セッション管理       | CookieとRedisを用いたセッション認証            | JWTは使用せず、サーバーサイド管理型セッション     |
| **パフォーマンス**        | 初回ロード時間       | 3秒以内で表示されること                       | SSRおよびキャッシュ活用（Next.js）       |
| 〃                  | 操作レスポンス       | 300ms以内で主要操作が完了する                  | 非同期処理とバックエンド最適化              |
| **セキュリティ**         | 通信の暗号化        | HTTPSによる通信                         | TLS証明書必須                     |
| 〃                  | セッション固定攻撃対策   | セッションIDの再生成・HttpOnly/Cookie属性の適切設定 | Secureフラグ付与も考慮               |
| **運用・保守性**         | ログ収集          | アクセスログ、エラーログを永続化し構造化               | JSONログ + Loki/Fluentdを想定     |
| 〃                  | モニタリング        | 各サービスの稼働状況を可視化                     | Grafana + Prometheus 等       |
| 〃                  | 開発環境構築        | Docker Composeでローカル開発環境を統一         | `make up` 等で立ち上がる構成          |
| **技術スタック**         | バックエンド        | Go（Echo）                           | REST API設計に準拠                |
| 〃                  | フロントエンド       | TypeScript（Next.js）                | App Router採用可                |
| 〃                  | データベース        | PostgreSQL                         | 正規化とインデックス設計を重視              |
| 〃                  | キャッシュ / セッション | Redis                              | シンプルな構成で使用                   |
| 〃                  | コンテナ          | Docker + Docker Compose            | 本番環境ではKubernetesも検討可（今回は対象外） |
| **可用性**            | サービス停止時の影響範囲  | エラーメッセージ表示・復旧可能性の担保                | フロントでFallback UI設計           |
| **拡張性**            | 機能追加時の影響範囲    | **モジュラーモノリス**アーキテクチャを採用            | ドメイン単位での疎結合化を意識              |
| **スケーラビリティ**       | ユーザー数の対応      | **今回はスケーラビリティは考慮しない**              | 単一ノード、単純な構成で十分               |
| **国際化 / アクセシビリティ** | 対応有無          | **対応しない**                          | 要件外                          |
